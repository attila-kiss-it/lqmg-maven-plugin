<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2011, Everit Kft.

    All rights reserved.

    This library is free software; you can redistribute it and/or
    modify it under the terms of the GNU Lesser General Public
    License as published by the Free Software Foundation; either
    version 3 of the License, or (at your option) any later version.

    This library is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
    Lesser General Public License for more details.

    You should have received a copy of the GNU Lesser General Public
    License along with this library; if not, write to the Free Software
    Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
    MA 02110-1301  USA

-->
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<body>
  <h1>Usage</h1>

  <h2>Foreword</h2>

  <p>
    The plugin uses the <a href="https://github.com/db-lqmg">Everit LQMG</a> library. To know how exactly the plugin
    works, read the documentation of that library.
  </p>

  <h2>Plugin execution</h2>

  <p>Although an m2e lifec</p>
  <p>
    <b>Important:</b> the LiquiBase XML file name must be unique. If not unique the file name the plguin find bad xml
    file.
  </p>

  <h3>Minimal configuration</h3>
  <div class="source">
    <pre>
&lt;plugin&gt;
    &lt;groupId&gt;org.everit.db&lt;/groupId&gt;
    &lt;artifactId&gt;lb2qd-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
    &lt;executions&gt;
      &lt;execution&gt;
        &lt;goals&gt;
          &lt;goal&gt;generate&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;sourceXML&gt;META-INF/liquibase/changeLog.xml&lt;/sourceXML&gt;
          &lt;targetFolder&gt;src/main/java&lt;/targetFolder&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
			</pre>
  </div>
  <p>This configuration is generate metamodel to src/main/java/{schemaName}/ and src/main/java/public_/ the
    LiquiBase tables.</p>
  <p>
    {schemaName} - defined the LiquiBase XML. See more information the LiquiBase XML file in the <a class="externalLink"
      href="http://www.liquibase.org/">LiquiBase</a> page or in below.
  </p>

  <p>META-INF/liquibase/changeLog.xml</p>
  <div class="source">
    <pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog 
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext 
		http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd"
    objectQuotingStrategy="QUOTE_ALL_OBJECTS"&gt;
    
    &lt;!-- Include the correct dependecy where find this xml.--&gt;
    &lt;include file="META-INF/liquibase/person.xml"/&gt;
	
    &lt;changeSet id="1.schemaCreation" author="org-everit"&gt;
        &lt;sql dbms="h2"&gt;CREATE SCHEMA IF NOT EXISTS "org.everit.car"&lt;/sql&gt;
    &lt;/changeSet&gt;

    &lt;changeSet id="1" author="org-everit"&gt;
        &lt;createTable tableName="CAR_T" schemaName="org.everit.car"&gt;
            &lt;column name="id" type="int" autoIncrement="true"&gt;
                &lt;constraints primaryKey="true" nullable="false" /&gt;
            &lt;/column&gt;
            &lt;column name="car_name" type="varchar(50)" /&gt;
            &lt;column name="person_id" type="int"&gt;&lt;/column&gt;
        &lt;/createTable&gt;
        &lt;addForeignKeyConstraint
            baseTableSchemaName="org.everit.car" constraintName="carOwner"
            referencedTableName="person" baseColumnNames="person_id"
            baseTableName="CAR_T" referencedColumnNames="id"
            referencedTableSchemaName="org.everit.person" /&gt;
    &lt;/changeSet&gt;


    &lt;changeSet id="2" author="org-everit"&gt;
        &lt;addColumn tableName="person" schemaName="org.everit.person"&gt;
            &lt;column name="username" type="varchar(8)" /&gt;
        &lt;/addColumn&gt;
    &lt;/changeSet&gt;

&lt;/databaseChangeLog&gt;</pre>
  </div>
  <h3>Full configuration</h3>
  <div class="source">
    <pre>
&lt;plugin&gt;
    &lt;groupId&gt;org.everit.db&lt;/groupId&gt;
    &lt;artifactId&gt;lb2qd-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
    &lt;executions&gt;
      &lt;execution&gt;
	    &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;generate&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;sourceXML&gt;META-INF/liquibase/changeLog.xml&lt;/sourceXML&gt;
          &lt;targetFolder&gt;src/main/java&lt;/targetFolder&gt;
          &lt;packageName&gt;com.example.lb2qd&lt;/packageName&gt;
          &lt;schemaToPackage&gt;false&lt;/schemaToPackage&gt;
          &lt;schemaPattern&gt;org.everit.car&lt;/schemaPattern&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
			</pre>
  </div>
  <p>This configuration means generate only org.everit.car schema name table(s) to the src/main/java/{packageName}
    where the schema name is not package. So result is src/main/java/com/example/QCar.java</p>

  <h3>Typical configuration</h3>
  <div class="source">
    <pre>
&lt;plugin&gt;
    &lt;groupId&gt;org.everit.db&lt;/groupId&gt;
    &lt;artifactId&gt;lb2qd-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;
    &lt;executions&gt;
      &lt;execution&gt;
	    &lt;phase&gt;generate-sources&lt;/phase&gt;
        &lt;goals&gt;
          &lt;goal&gt;generate&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
          &lt;sourceXML&gt;META-INF/liquibase/changeLog.xml&lt;/sourceXML&gt;
          &lt;targetFolder&gt;src/main/java&lt;/targetFolder&gt;
          &lt;schemaPattern&gt;org.everit.car&lt;/schemaPattern&gt;
        &lt;/configuration&gt;
      &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
			</pre>
  </div>
  <p>This configuration means generate only org.everit.car schema name table(s) to the src/main/java/{shcemaName}/
    where the schema name is package. So result is src/main/java/org/everit/car/QCar.java</p>

  <h3>Configurations</h3>
  <p>A plugin configuration says to place of source XML, generated target folder, and the package name. Furthermore
    says plugin goals.</p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><p>goal</p></td>
        <td><p>
            Says the execute goal. See more information <a href="plugin-info.html">Goals</a>
          </p></td>
      </tr>
      <tr>
        <td><p>configuration</p></td>
        <td><p>Contains the plugin configurations (optional and required settings).</p>
          <ul>
            <li><a href="plugin-info.html#sourceXML">sourceXML</a>
            <p>The LiquiBase XML file path (relative or absolute) from which generate the QueryDSL meta model.</p></li>
            <li><a href="plugin-info.html#targetFolder">targetFolder</a>
            <p>The base target directory of the generated meta-models be placed.</p></li>
            <li><a href="plugin-info.html#packageName">packageName</a>
            <p>The redefined the definitive target directory. If using this configuration element using the
                schemaToPackage configuration element and set false.</p></li>
            <li><a href="plugin-info.html#schemaToPackage">schemaToPackage</a>
            <p>If not want to the definitve target directory be targetFolder/{schemaName}. If only this optional
                configuration element the result is generete metamodel to only targetFolder.</p></li>
            <li><a href="plugin-info.html#schemaPattern">schemaPattern</a>
            <p>Specified which shema generated only. Typical using because the default tables generated if not
                specified the shcemaPattern.</p></li>
          </ul></td>
      </tr>
    </tbody>
  </table>
</body>
</html>